# FROM balenalib/%%BALENA_MACHINE_NAME%%-debian-openjdk:latest-buster

# \/ If you want to use java 8 delete the # in front of the line below and add a # in front of the first line \/
# FROM balenalib/%%BALENA_MACHINE_NAME%%-debian-openjdk:8-jdk-stretch

# Temporary solution for java 16
FROM balenalib/%%BALENA_MACHINE_NAME%%-debian:latest

ADD https://download.java.net/java/GA/jdk16.0.1/7147401fd7354114ac51ef3e1328291f/9/GPL/openjdk-16.0.1_linux-aarch64_bin.tar.gz /opt/

RUN tar -zxf /opt/openjdk-16.0.1_linux-aarch64_bin.tar.gz -C /opt/

ENV DBUS_SYSTEM_BUS_ADDRESS=unix:path=/host/run/dbus/system_bus_socket

RUN install_packages wget jq

COPY . /

COPY start.sh /usr/src/

RUN chmod +x /usr/src/start.sh

CMD [ "/bin/bash", "/usr/src/start.sh" ]
